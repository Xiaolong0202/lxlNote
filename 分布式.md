## SOA与微服务：

什么是SOA架构
SOA（全称：Service Oriented Architecture），中文意思为 “面向服务的架构”，你可以将它理解为一个架构模型或者一种设计方法，而并不是服务解决方案。

其中包含多个服务， 服务之间通过相互依赖或者通过通信机制，来完成相互通信的，最终提供一系列的功能。一个服务通常以独立的形式存在与操作系统进程中。各个服务之间通过网络调用 。

跟 SOA 相提并论的还有一个 ESB（企业服务总线），**简单来说ESB就是一根管道，用来连接各个服务节点。为了集成不同系统，不同协议的服务，ESB 可以简单理解为：它做了消息的转化解释和路由工作，让不同的服务互联互通；**

我们将各个应用之间彼此的通信全部去掉，在中间引入一个ESB企业总线，各个服务之间，只需要和ESB进行通信，这个时候，各个应用之间的交互就会变得更加的清晰，业务架构/逻辑等，也会变得很清楚。

原本杂乱没有规划的系统，梳理成了一个有规划可治理的系统，在这个过程中，最大的变化，**就是引入了ESB企业总线。**

微服务与SOA相比去掉了ESB企业服务总线，服务与服务之间是通过轻量级的通信协议来进行通信，微服务架构更加的组件化，微服务架构模式是将一个大的应用拆分成小的应用

**CI/CD**
CI/CD代表持续集成 、和持续交付、持续部署 这是一种软件开发实践，目的是通过自动化和频繁的代码集成、测试以及部署，提高软件开发过程的效率和质量。

1. **持续集成（Continuous Integration，CI）：** 开发者将他们的代码频繁地合并到共享存储库中，然后通过自动化的构建和测试过程来验证代码的正确性。这有助于及早发现和解决代码集成问题，防止长时间的开发分支导致的冲突。
2. **持续交付（Continuous Delivery，CD）：** 一旦代码通过了持续集成的测试，它就被认为是“可交付”的。持续交付的目标是确保软件随时都能够以可部署的状态交付给用户，但实际的部署可以由开发团队手动触发。
3. **持续部署（Continuous Deployment）：** 在持续交付的基础上，持续部署更进一步，将通过测试的代码自动部署到生产环境，使新功能或修复的 bug 非常快速地交付给用户。

## 一致性：

### 线性一致性(严格一致性)：

表示一个进程读取的必须是全局中的最新的信息。他更关注的是全局的所有执行顺序是一致的，**更关注全局时间下的执行顺序**（多个进程之间各个操作的执行顺序）

### 顺序一致性

表示一个进程不一定会读到全局中的最新的信息，但是系统会保证这个进程对这个系统操作顺序会被按照顺序进行（**更关注单个进程的执行顺序**），也就是说多个写的结果会按照顺序读出，在顺序一致性下，一个进程对共享变量的修改**不一定会被其他进程立刻感知**（同步），但不同进程对共享变量的写入**必须以相同的顺序**被所有进程看到。

   在ZooKeeper中，为了追求更高的性能，对Paxos做了简化落地，并称之为ZAB算法：

- 线性写：为了保证写的一致性，使用回主写实现了写的串行化
- 过半写入：为了追求写入的性能，使用过半写入+拜占庭机制保障写入数据的有效性。
- 顺序读：在读取的情况下，ZooKeeper可以提供较旧的数据，但由于写入的有序，可以保证节点在生命周期中对外的数据一致性。

## BASE理论

他是cap理论的延伸，意思是如果做不到cp，那就使用合适的方式做到最终一致

### BA 基本可用

指的是在系统出现故障的时候，可以损失部分可用性，丢失些非核型功能达到基本可用的状态，如服务熔断降级

### S 软状态

指的是数据被更改，但是还没有同步到所有节点的 一个中间过程，这个中间状态不会出现不可用的情况，但是可能造成数据不一致的情况,如异步复制

### E   eventually Consistency  最终一致状态

指的是，系统中的副本经过了一定的时间的同步之后，达到了数据的一致性

**CAP理论**是由计算机科学家Eric Brewer于2000年提出的理论，用于描述分布式系统设计时面临的三个基本问题：一致性（Consistency）、可用性（Availability）、分区容忍性（Partition Tolerance）。这三个概念无法完全共存，CAP理论表述了在分布式系统中只能同时满足其中两个，而不能同时满足三个的困境。